<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Androidå¼€ç½å¤´â€”â€”â€”å¤–éƒ¨å­˜å‚¨ä¸å†…éƒ¨å­˜å‚¨å®Œå…¨è§£æ | å°¤é±¼å“¥</title>
  <meta name="description" content="A minimal hexo theme." />
  <meta name="keywords" content="hexo,theme,typescript,otakism,otaku" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="context.getExternalFilesDir(),Environment.getExternalStorageDirectory()ï¼Œå‚»å‚»åˆ†ä¸æ¸…ï¼Ÿåˆ°åº•ä»€ä¹ˆç®—å®‰å“æ‰‹æœºçš„external storageï¼Ÿ   ä¸€ã€å­˜å‚¨æ¦‚è¿°Androidæä¾›äº†å‡ ç§ä¿å­˜applicationæŒä¹…åŒ–æ•°æ®çš„é€‰æ‹©ã€‚è€Œå¼€å‘è€…æ ¹æ®  æ•°æ®æ˜¯å¦ä¸ºappç§æœ‰ æ•°æ®æ˜¯å¦å¯ä»¥æš´éœ²ç»™å…¶ä»–app æ•°æ®å¤§å°æƒ…å†µ  æ¥é€‰æ‹©ä¸åŒçš„æ–¹å¼å­˜">
<meta property="og:type" content="article">
<meta property="og:title" content="Androidå¼€ç½å¤´â€”â€”â€”å¤–éƒ¨å­˜å‚¨ä¸å†…éƒ¨å­˜å‚¨å®Œå…¨è§£æ">
<meta property="og:url" content="http://www.youyuge.cn/2017/06/02/storage-explaination/index.html">
<meta property="og:site_name" content="å°¤é±¼å“¥">
<meta property="og:description" content="context.getExternalFilesDir(),Environment.getExternalStorageDirectory()ï¼Œå‚»å‚»åˆ†ä¸æ¸…ï¼Ÿåˆ°åº•ä»€ä¹ˆç®—å®‰å“æ‰‹æœºçš„external storageï¼Ÿ   ä¸€ã€å­˜å‚¨æ¦‚è¿°Androidæä¾›äº†å‡ ç§ä¿å­˜applicationæŒä¹…åŒ–æ•°æ®çš„é€‰æ‹©ã€‚è€Œå¼€å‘è€…æ ¹æ®  æ•°æ®æ˜¯å¦ä¸ºappç§æœ‰ æ•°æ®æ˜¯å¦å¯ä»¥æš´éœ²ç»™å…¶ä»–app æ•°æ®å¤§å°æƒ…å†µ  æ¥é€‰æ‹©ä¸åŒçš„æ–¹å¼å­˜">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3251332-ee02f7debaf417c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://www.jcodecraeer.com/uploads/20130923/13799270389415.jpg">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3251332-65d6a32fac167dc9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2017-06-02T15:05:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Androidå¼€ç½å¤´â€”â€”â€”å¤–éƒ¨å­˜å‚¨ä¸å†…éƒ¨å­˜å‚¨å®Œå…¨è§£æ">
<meta name="twitter:description" content="context.getExternalFilesDir(),Environment.getExternalStorageDirectory()ï¼Œå‚»å‚»åˆ†ä¸æ¸…ï¼Ÿåˆ°åº•ä»€ä¹ˆç®—å®‰å“æ‰‹æœºçš„external storageï¼Ÿ   ä¸€ã€å­˜å‚¨æ¦‚è¿°Androidæä¾›äº†å‡ ç§ä¿å­˜applicationæŒä¹…åŒ–æ•°æ®çš„é€‰æ‹©ã€‚è€Œå¼€å‘è€…æ ¹æ®  æ•°æ®æ˜¯å¦ä¸ºappç§æœ‰ æ•°æ®æ˜¯å¦å¯ä»¥æš´éœ²ç»™å…¶ä»–app æ•°æ®å¤§å°æƒ…å†µ  æ¥é€‰æ‹©ä¸åŒçš„æ–¹å¼å­˜">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/3251332-ee02f7debaf417c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
  
  
    <link rel="icon" href="/favicon.png">
  

	<script src="https://use.typekit.net/eyf3hir.js"></script>
  <script>try{Typekit.load({ async: false });}catch(e){}</script>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
  

</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/">
			<img src="/images/logo.png" />
			<span id="site-desc">
			  Mr.é±¿é±¼çš„è®°å¿†ç½å¤´
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/" class="nav-home nav">
          Home
        </a>
      
        <a href="/2017/05/10/my_first_post_test/" class="nav-about nav">
          About
        </a>
      
        <a href="/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      <article id="post-storage-explaination"
  class="post article white-box article-type-post"
  itemscope itemprop="blogPost">
	<h2 class="title">
  	<a href="/2017/06/02/storage-explaination/">
    	Androidå¼€ç½å¤´â€”â€”â€”å¤–éƒ¨å­˜å‚¨ä¸å†…éƒ¨å­˜å‚¨å®Œå…¨è§£æ
    </a>
  </h2>
	<time>
	  Jun 2, 2017
	</time>
	<section class="content">
  	<div class="article-entry" itemprop="articleBody">
    	<blockquote>
<p>context.getExternalFilesDir(),Environment.getExternalStorageDirectory()ï¼Œå‚»å‚»åˆ†ä¸æ¸…ï¼Ÿåˆ°åº•ä»€ä¹ˆç®—å®‰å“æ‰‹æœºçš„external storageï¼Ÿ</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/3251332-ee02f7debaf417c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="ä¸€ã€å­˜å‚¨æ¦‚è¿°"><a href="#ä¸€ã€å­˜å‚¨æ¦‚è¿°" class="headerlink" title="ä¸€ã€å­˜å‚¨æ¦‚è¿°"></a>ä¸€ã€å­˜å‚¨æ¦‚è¿°</h2><p>Androidæä¾›äº†å‡ ç§ä¿å­˜applicationæŒä¹…åŒ–æ•°æ®çš„é€‰æ‹©ã€‚è€Œå¼€å‘è€…æ ¹æ®</p>
<ul>
<li>æ•°æ®æ˜¯å¦ä¸ºappç§æœ‰</li>
<li>æ•°æ®æ˜¯å¦å¯ä»¥æš´éœ²ç»™å…¶ä»–app</li>
<li>æ•°æ®å¤§å°æƒ…å†µ</li>
</ul>
<p>æ¥é€‰æ‹©ä¸åŒçš„æ–¹å¼å­˜å‚¨æ•°æ®ã€‚</p>
<h3 id="1-1-å­˜å‚¨æ–¹å¼"><a href="#1-1-å­˜å‚¨æ–¹å¼" class="headerlink" title="1.1 å­˜å‚¨æ–¹å¼"></a>1.1 å­˜å‚¨æ–¹å¼</h3><p>å®‰å“æä¾›äº†å¦‚ä¸‹å­˜å‚¨çš„æ–¹å¼é€‰æ‹©ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»åˆ«</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>Shared Preferences</td>
<td>ä»¥é”®å€¼å¯¹å½¢å¼åœ¨xmlä¸­å­˜å‚¨é…ç½®  </td>
</tr>
<tr>
<td>Internal Storage ï¼ˆå†…éƒ¨å­˜å‚¨ï¼‰</td>
<td>è®¾å¤‡ä¸­çš„ç§æœ‰æ•°æ®   </td>
</tr>
<tr>
<td>External Storage ï¼ˆå¤–éƒ¨å­˜å‚¨ï¼‰</td>
<td>å…±äº«çš„å¤–éƒ¨å­˜å‚¨ä¸­å­˜å…¬æœ‰æ•°æ®</td>
</tr>
<tr>
<td>SQLite Databases</td>
<td>ç§æœ‰æ•°æ®åº“å­˜å‚¨æ ¼å¼åŒ–çš„æ•°æ®</td>
</tr>
<tr>
<td>Network Connection</td>
<td>åœ¨å¼€å‘è€…ä¸ªäººç½‘ç»œæœåŠ¡å™¨ç«¯å­˜å‚¨æ•°æ®</td>
</tr>
</tbody>
</table>
<h3 id="1-2-content-provider"><a href="#1-2-content-provider" class="headerlink" title="1.2 content provider"></a>1.2 content provider</h3><p>å®‰å“æä¾›äº†ä¸€ç§ç”šè‡³å°†appçš„ç§æœ‰æ•°æ®æä¾›ç»™å…¶ä»–appçš„é€”å¾„â€”â€”â€”â€”content providerã€‚è€Œandroidå®˜æ–¹guideä¸­ä¸æŠŠå®ƒå½’ä¸ºStrage Optionsä¸­çš„ä¸€ç§ã€‚</p>
<h2 id="äºŒã€Internal-Storage-å†…éƒ¨å­˜å‚¨"><a href="#äºŒã€Internal-Storage-å†…éƒ¨å­˜å‚¨" class="headerlink" title="äºŒã€Internal Storage å†…éƒ¨å­˜å‚¨"></a>äºŒã€Internal Storage å†…éƒ¨å­˜å‚¨</h2><h3 id="2-1-å†…éƒ¨å­˜å‚¨å®šä¹‰"><a href="#2-1-å†…éƒ¨å­˜å‚¨å®šä¹‰" class="headerlink" title="2.1 å†…éƒ¨å­˜å‚¨å®šä¹‰"></a>2.1 å†…éƒ¨å­˜å‚¨å®šä¹‰</h3><blockquote>
<p>You can save files directly on the deviceâ€™s internal storage. By default, files saved to the internal storage are private to your application and other applications cannot access them (nor can the user). When the user uninstalls your application, these files are removed.</p>
</blockquote>
<p>ç™½è¯æ–‡ç‰ˆæœ¬ï¼š<br>æ³¨æ„å†…éƒ¨å­˜å‚¨ä¸æ˜¯å†…å­˜ã€‚å†…éƒ¨å­˜å‚¨ä½äºç³»ç»Ÿä¸­å¾ˆç‰¹æ®Šçš„ä¸€ä¸ªä½ç½®ï¼ˆç±»ä¼¼<strong>æ²™ç›’</strong>ï¼‰ï¼Œå¦‚æœä½ æƒ³å°†æ–‡ä»¶å­˜å‚¨äºå†…éƒ¨å­˜å‚¨ä¸­ï¼Œé‚£ä¹ˆæ–‡ä»¶é»˜è®¤åªèƒ½è¢«ä½ çš„åº”ç”¨è®¿é—®åˆ°ï¼Œä¸”ä¸€ä¸ªåº”ç”¨æ‰€åˆ›å»ºçš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨å’Œåº”ç”¨åŒ…åç›¸åŒçš„ç›®å½•ä¸‹ã€‚<br>ä¹Ÿå°±æ˜¯è¯´åº”ç”¨åˆ›å»ºäºå†…éƒ¨å­˜å‚¨çš„æ–‡ä»¶ï¼Œä¸è¿™ä¸ªåº”ç”¨æ˜¯å…³è”èµ·æ¥çš„ã€‚å½“ä¸€ä¸ªåº”ç”¨å¸è½½ä¹‹åï¼Œå†…éƒ¨å­˜å‚¨ä¸­çš„è¿™äº›æ–‡ä»¶ä¹Ÿè¢«åˆ é™¤ã€‚ å†…éƒ¨å­˜å‚¨ç©ºé—´ååˆ†æœ‰é™ï¼Œå› è€Œæ˜¾å¾—å¯è´µï¼Œå¦å¤–ï¼Œå®ƒä¹Ÿæ˜¯ç³»ç»Ÿæœ¬èº«å’Œç³»ç»Ÿåº”ç”¨ç¨‹åºä¸»è¦çš„æ•°æ®å­˜å‚¨æ‰€åœ¨åœ°ï¼Œä¸€æ—¦å†…éƒ¨å­˜å‚¨ç©ºé—´è€—å°½ï¼Œæ‰‹æœºä¹Ÿå°±æ— æ³•ä½¿ç”¨äº†ã€‚æ‰€ä»¥å¯¹äºå†…éƒ¨å­˜å‚¨ç©ºé—´ï¼Œæˆ‘ä»¬è¦å°½é‡é¿å…ä½¿ç”¨ã€‚Shared Preferenceså’ŒSQLiteæ•°æ®åº“éƒ½æ˜¯å­˜å‚¨åœ¨å†…éƒ¨å­˜å‚¨ç©ºé—´ä¸Šçš„ã€‚<strong>å†…éƒ¨å­˜å‚¨ä¸€èˆ¬ç”¨<code>Context</code>æ¥è·å–å’Œæ“ä½œã€‚</strong></p>
<h3 id="2-2-åˆ›å»ºå¹¶å†™å…¥å†…éƒ¨å­˜å‚¨"><a href="#2-2-åˆ›å»ºå¹¶å†™å…¥å†…éƒ¨å­˜å‚¨" class="headerlink" title="2.2 åˆ›å»ºå¹¶å†™å…¥å†…éƒ¨å­˜å‚¨"></a>2.2 åˆ›å»ºå¹¶å†™å…¥å†…éƒ¨å­˜å‚¨</h3><blockquote>
<ol>
<li>Call <code>openFileOutput()</code> with the name of the file and the operating mode. This returns a FileOutputStream.</li>
<li>Write to the file with <code>write()</code>.</li>
<li>Close the stream with <code>close()</code>.</li>
</ol>
</blockquote>
<p>å®‰å“è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®€ä¾¿æ–¹æ³•<code>Context</code>ç±»çš„ <code>openFileOutput()</code>æ¥è¯»å†™åº”ç”¨åœ¨å†…éƒ¨å­˜å‚¨ç©ºé—´ä¸Šçš„æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå‘æ–‡ä»¶ä¸­å†™å…¥æ–‡æœ¬çš„ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">String FILENAME = &quot;hello_file&quot;;</div><div class="line">String string = &quot;hello world!&quot;;</div><div class="line">FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);</div><div class="line">fos.write(string.getBytes());</div><div class="line">fos.close();</div></pre></td></tr></table></figure>
<p>è¯»å–åŒç†ï¼ŒæŠŠ<code>write()</code>æ¢æˆ<code>read()</code>ç½¢äº†ã€‚ </p>
<p><strong><code>openFileOutput()</code>æˆ–è€…<code>Context.getFileDir()</code>é€šè¿‡Android Device Monitorå·¥å…·å¯ä»¥æ‰¾åˆ°æ­¤ç›®å½•ï¼Œä¸º<code>/data/data/com.xxx.xxx/files/</code>ã€‚ </strong></p>
<hr>
<p><strong><em>æ‹“å±•ä¼˜åŒ–ï¼š</em></strong><br>ä½¿ç”¨javaæµï¼Œå€ŸåŠ©<code>FileOutputStream</code>æ„å»ºå‡ºä¸€ä¸ª<code>OutputStreamWriter</code>å¯¹è±¡ï¼Œæ¥ç€<code>å†ç”¨BufferedWriter</code>å¯¹è±¡å°è£…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);</div><div class="line">BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(fos));</div><div class="line">writer.write(string);</div></pre></td></tr></table></figure>
<h3 id="2-3-å†…éƒ¨å­˜å‚¨å…¶ä»–æ“ä½œ"><a href="#2-3-å†…éƒ¨å­˜å‚¨å…¶ä»–æ“ä½œ" class="headerlink" title="2.3 å†…éƒ¨å­˜å‚¨å…¶ä»–æ“ä½œ"></a>2.3 å†…éƒ¨å­˜å‚¨å…¶ä»–æ“ä½œ</h3><ul>
<li>åˆ—å‡ºæ‰€æœ‰çš„å·²åˆ›å»ºçš„æ–‡ä»¶,è¿™ä¸ªå¯èƒ½ä¸å®¹æ˜“æƒ³åˆ°ï¼ŒContextå±…ç„¶æœ‰è¿™æ ·çš„æ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">String[] files = Context.fileList();</div><div class="line">for(String file : files) ï½›</div><div class="line">Log.e(TAG, &quot;file is &quot;+ file);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>åˆ é™¤æ–‡ä»¶ï¼Œèƒ½åˆ›å»ºå°±è¦èƒ½å¤Ÿåˆ é™¤ï¼Œå½“ç„¶ä¹Ÿä¼šæä¾›äº†åˆ é™¤æ–‡ä»¶çš„æ¥å£ï¼Œå®ƒä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦æä¾›æ–‡ä»¶å</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if(Context.deleteFile(filename)) &#123;</div><div class="line">Log.e(TAG, &quot;delete file &quot;+ filename + &quot; sucessfullyâ€œ);</div><div class="line">&#125; else &#123;</div><div class="line">Log.e(TAG, &quot;failed to deletefile &quot; + filename);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œéœ€è¦ä¼ å…¥ç›®å½•åç§°ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ç”¨åˆ°æ“ä½œè·¯å¾„</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">File workDir = Context.getDir(dirName, Context.MODE_PRIVATE);</div><div class="line">Log.e(TAG, &quot;workdir &quot;+ workDir.getAbsolutePath();</div></pre></td></tr></table></figure>
<h3 id="2-4-å†…éƒ¨å­˜å‚¨ç¼“å­˜cache"><a href="#2-4-å†…éƒ¨å­˜å‚¨ç¼“å­˜cache" class="headerlink" title="2.4 å†…éƒ¨å­˜å‚¨ç¼“å­˜cache"></a>2.4 å†…éƒ¨å­˜å‚¨ç¼“å­˜cache</h3><p>ä½ åº”è¯¥ä½¿ç”¨<code>getCacheDir()</code>æ¥å†…éƒ¨ç»å¯¹ç¼“å­˜ç›®å½•<code>File</code>ï¼Œè¿™äº›ç¼“å­˜å°†ä¼šæ˜¯åœ¨å­˜å‚¨ä¸å¤Ÿæ—¶ç¬¬ä¸€ä¸ªè¢«æ¸…é™¤çš„ï¼Œä½†æ˜¯ä¸ä¼šä¿è¯è¿™äº›æ–‡ä»¶ä¸€å®šä¼šè¢«æ¸…é™¤ã€‚é€šè¿‡Android Device Monitorå·¥å…·å¯ä»¥æ‰¾åˆ°æ­¤ç›®å½•ï¼Œä¸º<code>/data/data/com.xxx.xxx/cache/</code>ã€‚ </p>
<blockquote>
<p>Note:ä½ ä¸åº”è¯¥æŒ‡æœ›ç€ç³»ç»Ÿæ¥ç»™ä½ æ¸…ç†è¿™äº›cacheæ–‡ä»¶ï¼Œä½ åº”è¯¥è‡ªå·±è®¾å®šä¸€ä¸ªåˆç†çš„æœ€å¤§ä¸Šé™ï¼Œæ¯”å¦‚1MBã€‚å½“ç”¨æˆ·å¸è½½appæ—¶ï¼Œè¿™äº›æ–‡ä»¶åŒæ—¶è¢«å¸è½½ã€‚</p>
</blockquote>
<h3 id="2-5-å†…éƒ¨å­˜å‚¨æ€»ç»“"><a href="#2-5-å†…éƒ¨å­˜å‚¨æ€»ç»“" class="headerlink" title="2.5 å†…éƒ¨å­˜å‚¨æ€»ç»“"></a>2.5 å†…éƒ¨å­˜å‚¨æ€»ç»“</h3><ol>
<li>æ–‡ä»¶æ“ä½œåªéœ€è¦å‘å‡½æ•°æä¾›æ–‡ä»¶åï¼Œæ‰€ä»¥ç¨‹åºè‡ªå·±åªéœ€è¦ç»´æŠ¤æ–‡ä»¶åå³å¯ï¼›</li>
<li>ä¸ç”¨è‡ªå·±å»åˆ›å»ºæ–‡ä»¶å¯¹è±¡å’Œè¾“å…¥ã€è¾“å‡ºæµï¼Œæä¾›æ–‡ä»¶åå°±å¯ä»¥è¿”å›Fileå¯¹è±¡æˆ–è¾“å…¥è¾“å‡ºæµ</li>
<li>å¯¹äºè·¯å¾„æ“ä½œè¿”å›çš„éƒ½æ˜¯æ–‡ä»¶å¯¹è±¡ã€‚</li>
<li>ç”±<code>Context</code>ç±»è°ƒç”¨</li>
</ol>
<h2 id="ä¸‰ã€External-Storage-å¤–éƒ¨å­˜å‚¨"><a href="#ä¸‰ã€External-Storage-å¤–éƒ¨å­˜å‚¨" class="headerlink" title="ä¸‰ã€External Storage å¤–éƒ¨å­˜å‚¨"></a>ä¸‰ã€External Storage å¤–éƒ¨å­˜å‚¨</h2><h3 id="3-1-å¤–éƒ¨å­˜å‚¨å®šä¹‰"><a href="#3-1-å¤–éƒ¨å­˜å‚¨å®šä¹‰" class="headerlink" title="3.1 å¤–éƒ¨å­˜å‚¨å®šä¹‰"></a>3.1 å¤–éƒ¨å­˜å‚¨å®šä¹‰</h3><blockquote>
<p>Every Android-compatible device supports a shared â€œexternal storageâ€ that you can use to save files. This can be a removable storage media (such as an SD card) or an internal (non-removable) storage. Files saved to the external storage are world-readable and can be modified by the user when they enable USB mass storage to transfer files on a computer.</p>
</blockquote>
<p>å¦å¤–ï¼Œå…³äºå¤–éƒ¨å­˜å‚¨ï¼Œæˆ‘è§‰å¾—apiä¸­åœ¨ä»‹ç»Environment.getExternalStorageDirectory()æ–¹æ³•çš„æ—¶å€™è¯´å¾—å¾ˆæ¸…æ¥šï¼š</p>
<blockquote>
<p>Note: donâ€™t be confused by the word â€œexternalâ€ here. This directory can better be thought as media/shared storage. It is a filesystem that can hold a relatively large amount of data and that is shared across all applications (does not enforce permissions). Traditionally this is an SD card, but it may also be implemented as built-in storage in a device that is distinct from the protected internal storage and can be mounted as a filesystem on a computer.</p>
</blockquote>
<p>ç™½è¯æ–‡ç‰ˆæœ¬ï¼š<br>æœ€å®¹æ˜“æ··æ·†çš„æ˜¯å¤–éƒ¨å­˜å‚¨ï¼Œå¦‚æœè¯´pcä¸Šä¹Ÿè¦åŒºåˆ†å‡ºå¤–éƒ¨å­˜å‚¨å’Œå†…éƒ¨å­˜å‚¨çš„è¯ï¼Œé‚£ä¹ˆè‡ªå¸¦çš„ç¡¬ç›˜ç®—æ˜¯å†…éƒ¨å­˜å‚¨ï¼ŒUç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜ç®—æ˜¯å¤–éƒ¨å­˜å‚¨ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆå®¹æ˜“å¸¦ç€è¿™æ ·çš„ç†è§£å»çœ‹å¾…å®‰å“æ‰‹æœºï¼Œè®¤ä¸ºæœºèº«å›ºæœ‰å­˜å‚¨æ˜¯å†…éƒ¨å­˜å‚¨ï¼Œè€Œæ‰©å±•çš„TFå¡æ˜¯å¤–éƒ¨å­˜å‚¨ã€‚æ¯”å¦‚æˆ‘ä»¬ä»»åŠ¡16GBç‰ˆæœ¬çš„Nexus 4æœ‰16Gçš„å†…éƒ¨å­˜å‚¨ï¼Œæ™®é€šæ¶ˆè´¹è€…å¯ä»¥è¿™æ ·ç†è§£ï¼Œä½†æ˜¯å®‰å“çš„ç¼–ç¨‹ä¸­ä¸èƒ½ï¼Œè¿™16GBä»ç„¶æ˜¯å¤–éƒ¨å­˜å‚¨ã€‚<br>æ‰€æœ‰çš„å®‰å“è®¾å¤‡éƒ½æœ‰å¤–éƒ¨å­˜å‚¨å’Œå†…éƒ¨å­˜å‚¨ï¼Œè¿™ä¸¤ä¸ªåç§°æ¥æºäºå®‰å“çš„æ—©æœŸè®¾å¤‡ï¼Œé‚£ä¸ªæ—¶å€™çš„è®¾å¤‡å†…éƒ¨å­˜å‚¨ç¡®å®æ˜¯å›ºå®šçš„ï¼Œè€Œå¤–éƒ¨å­˜å‚¨ç¡®å®æ˜¯å¯ä»¥åƒUç›˜ä¸€æ ·ç§»åŠ¨çš„ã€‚ä½†æ˜¯åœ¨åæ¥çš„è®¾å¤‡ä¸­ï¼Œå¾ˆå¤šä¸­é«˜ç«¯æœºå™¨éƒ½å°†è‡ªå·±çš„æœºèº«å­˜å‚¨æ‰©å±•åˆ°äº†8Gä»¥ä¸Šï¼Œä»–ä»¬å°†å­˜å‚¨åœ¨æ¦‚å¿µä¸Šåˆ†æˆäº†â€å†…éƒ¨internalâ€ å’Œâ€å¤–éƒ¨externalâ€ ä¸¤éƒ¨åˆ†ï¼Œä½†å…¶å®éƒ½åœ¨æ‰‹æœºå†…éƒ¨ã€‚æ‰€ä»¥<strong>ä¸ç®¡å®‰å“æ‰‹æœºæ˜¯å¦æœ‰å¯ç§»åŠ¨çš„sdcardï¼Œä»–ä»¬æ€»æ˜¯æœ‰å¤–éƒ¨å­˜å‚¨</strong>å’Œå†…éƒ¨å­˜å‚¨ã€‚æœ€å…³é”®çš„æ˜¯ï¼Œ<strong>æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ç›¸åŒçš„apiæ¥è®¿é—®å¯ç§»åŠ¨çš„sdcardæˆ–è€…æ‰‹æœºè‡ªå¸¦çš„å­˜å‚¨ï¼ˆå¤–éƒ¨å­˜å‚¨ï¼‰</strong>ã€‚</p>
<h3 id="3-2-è·å–æƒé™"><a href="#3-2-è·å–æƒé™" class="headerlink" title="3.2 è·å–æƒé™"></a>3.2 è·å–æƒé™</h3><p>manifestä¸­å¿…é¡»æ·»åŠ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;manifest ...&gt;</div><div class="line">    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</div><div class="line">    ...</div><div class="line">&lt;/manifest&gt;</div></pre></td></tr></table></figure>
<p>Android 6.0ä¹‹åæ–°åŠ å…¥äº†è¿è¡Œæ—¶æƒé™ï¼Œè¿™é‡Œä¸ä½œè¯¦è§£ï¼Œå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developer.android.com/about/versions/marshmallow/android-6.0.html" target="_blank" rel="external">https://developer.android.com/about/versions/marshmallow/android-6.0.html</a> </p>
</blockquote>
<h3 id="3-3-æ£€æŸ¥çŠ¶æ€"><a href="#3-3-æ£€æŸ¥çŠ¶æ€" class="headerlink" title="3.3 æ£€æŸ¥çŠ¶æ€"></a>3.3 æ£€æŸ¥çŠ¶æ€</h3><p>åœ¨ä½¿ç”¨å¤–éƒ¨å­˜å‚¨ä¹‹å‰ï¼Œä½ å¿…é¡»è¦ä½¿ç”¨<code>getExternalStorageState()</code>æ–¹æ³•ï¼Œå…ˆæ£€æŸ¥å¤–éƒ¨å­˜å‚¨çš„å½“å‰çŠ¶æ€ï¼Œä»¥åˆ¤æ–­æ˜¯å¦å¯ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">/* Checks if external storage is available for read and write */</div><div class="line">public boolean isExternalStorageWritable() &#123;</div><div class="line">    String state = Environment.getExternalStorageState();</div><div class="line">    if (Environment.MEDIA_MOUNTED.equals(state)) &#123;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div><div class="line">/* Checks if external storage is available to at least read */</div><div class="line">public boolean isExternalStorageReadable() &#123;</div><div class="line">    String state = Environment.getExternalStorageState();</div><div class="line">    if (Environment.MEDIA_MOUNTED.equals(state) ||</div><div class="line">        Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) &#123;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-4-å¤–éƒ¨å­˜å‚¨å†™å…¥æ–‡ä»¶"><a href="#3-4-å¤–éƒ¨å­˜å‚¨å†™å…¥æ–‡ä»¶" class="headerlink" title="3.4 å¤–éƒ¨å­˜å‚¨å†™å…¥æ–‡ä»¶"></a>3.4 å¤–éƒ¨å­˜å‚¨å†™å…¥æ–‡ä»¶</h3><p>è·å–äº†æƒé™ï¼Œæ£€æŸ¥äº†çŠ¶æ€ä¹‹åï¼Œç»ˆäºå¯ä»¥å†™å…¥äº†ï¼Œè€Œåˆæœ‰ä¸¤ç§ç±»å‹çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>å¤–éƒ¨å­˜å‚¨å…±æœ‰æ–‡ä»¶</li>
<li>å¤–éƒ¨å­˜å‚¨ç§æœ‰æ–‡ä»¶</li>
</ul>
<h4 id="3-4-1-å¤–éƒ¨å­˜å‚¨å…±æœ‰æ–‡ä»¶"><a href="#3-4-1-å¤–éƒ¨å­˜å‚¨å…±æœ‰æ–‡ä»¶" class="headerlink" title="3.4.1 å¤–éƒ¨å­˜å‚¨å…±æœ‰æ–‡ä»¶"></a>3.4.1 å¤–éƒ¨å­˜å‚¨å…±æœ‰æ–‡ä»¶</h4><blockquote>
<p>Saving files that can be shared with other apps</p>
</blockquote>
<p>å…¬å…±æ–‡ä»¶Public filesï¼šæ–‡ä»¶æ˜¯å¯ä»¥è¢«è‡ªç”±è®¿é—®ï¼Œ<strong>ç›®å½•ä»»æ„</strong>ï¼Œä¸”æ–‡ä»¶çš„æ•°æ®å¯¹å…¶ä»–åº”ç”¨æˆ–è€…ç”¨æˆ·æ¥è¯´éƒ½æ˜¯ç”±æ„ä¹‰çš„ï¼Œå½“åº”ç”¨è¢«å¸è½½ä¹‹åï¼Œå…¶å¸è½½å‰åˆ›å»ºçš„æ–‡ä»¶<strong>ä»ç„¶ä¿ç•™</strong>ã€‚æ¯”å¦‚cameraåº”ç”¨ï¼Œç”Ÿæˆçš„ç…§ç‰‡å¤§å®¶éƒ½èƒ½è®¿é—®ï¼Œè€Œä¸”cameraä¸åœ¨äº†ï¼Œç…§ç‰‡ä»ç„¶åœ¨ã€‚<br>ä¸¾ä¸ªæ —å­ï¼Œä¸‹é¢çš„æ–¹æ³•åœ¨å…¬å…±çš„å›¾ç‰‡ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å›¾ç‰‡ç›¸å†Œç›®å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public File getAlbumStorageDir(String albumName) &#123;</div><div class="line">    // Get the directory for the user&apos;s public pictures directory.</div><div class="line">    File file = new File(Environment.getExternalStoragePublicDirectory(</div><div class="line">            Environment.DIRECTORY_PICTURES), albumName);</div><div class="line">    if (!file.mkdirs()) &#123;</div><div class="line">        Log.e(LOG_TAG, &quot;Directory not created&quot;);</div><div class="line">    &#125;</div><div class="line">    return file;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œå¦‚æœä½ çš„api ç‰ˆæœ¬ä½äº8ï¼Œé‚£ä¹ˆä¸èƒ½ä½¿ç”¨<code>getExternalStoragePublicDirectory()</code>ï¼Œè€Œæ˜¯ä½¿ç”¨<code>Environment.getExternalStorageDirectory()</code>,ä»–ä¸å¸¦å‚æ•°ï¼Œä¹Ÿå°±ä¸èƒ½è‡ªå·±åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œåªæ˜¯è¿”å›å¤–éƒ¨å­˜å‚¨çš„æ ¹è·¯å¾„ã€‚</p>
<hr>
<p><strong><em>èº²é¿åª’ä½“æ‰«æ</em></strong><br>åœ¨ä½ çš„å¤–éƒ¨ç›®å½•ä¸‹æ”¾ä¸€ä¸ªåä¸º<code>.nomedia</code>çš„ç©ºæ–‡ä»¶ï¼Œåˆ™ä¼šé˜»æ­¢åª’ä½“æ‰«æå™¨é€šè¿‡<code>MediaStore</code> content provideræ¥è¯»å–ä½ çš„åª’ä½“æ–‡ä»¶ï¼ˆæ¯”å¦‚ç›¸å†Œä¸­å°±ä¸ä¼šæ˜¾ç¤ºï¼‰ã€‚ä½†æ˜¯æ›´å¥½çš„åŠæ³•æ˜¯ç”¨ä¸‹é¢ğŸ‘‡çš„å¤–éƒ¨å­˜å‚¨ç§äººæ¨¡å¼ã€‚</p>
<h3 id="3-4-2-å¤–éƒ¨å­˜å‚¨ç§æœ‰æ–‡ä»¶"><a href="#3-4-2-å¤–éƒ¨å­˜å‚¨ç§æœ‰æ–‡ä»¶" class="headerlink" title="3.4.2 å¤–éƒ¨å­˜å‚¨ç§æœ‰æ–‡ä»¶"></a>3.4.2 å¤–éƒ¨å­˜å‚¨ç§æœ‰æ–‡ä»¶</h3><blockquote>
<p>If you are handling files that are not intended for other apps to use (such as graphic textures or sound effects used by only your app), you should use a private storage directory on the external storage by calling <code>getExternalFilesDir()</code>.</p>
</blockquote>
<p> å…¶å®ç”±äºæ˜¯å¤–éƒ¨å­˜å‚¨çš„åŸå› å³æ˜¯æ˜¯è¿™ç§ç±»å‹çš„æ–‡ä»¶ä¹Ÿèƒ½è¢«å…¶ä»–ç¨‹åºè®¿é—®ï¼Œåªä¸è¿‡ä¸€ä¸ªåº”ç”¨ç§æœ‰çš„æ–‡ä»¶å¯¹å…¶ä»–åº”ç”¨å…¶å®æ˜¯æ²¡æœ‰è®¿é—®ä»·å€¼çš„ï¼ˆæ¶æ„ç¨‹åºé™¤å¤–ï¼‰ã€‚å¤–éƒ¨å­˜å‚¨ä¸Šï¼Œåº”ç”¨ç§æœ‰æ–‡ä»¶çš„ä»·å€¼åœ¨äºå¸è½½ä¹‹åï¼Œè¿™äº›æ–‡ä»¶<strong>ä¹Ÿä¼šè¢«åˆ é™¤</strong>ã€‚ç±»ä¼¼äºå†…éƒ¨å­˜å‚¨ã€‚<br> æ‰€æœ‰åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å­˜å‚¨çš„ç§æœ‰æ–‡ä»¶éƒ½æ”¾åœ¨æ ¹ç›®å½•çš„<code>Android/data/</code>ä¸‹ï¼Œç›®å½•å½¢å¼ä¸º<code>/Android/data/&lt;package_name&gt;/</code>ã€‚  </p>
<p> Android 4.3åŠå…¶ä»¥ä¸‹ä½¿ç”¨<code>getExternalFilesDir()</code>æ–¹æ³•å¯èƒ½åªä¼šè¯»å–æ‰‹æœºå†…éƒ¨ç©ºé—´ï¼Œè€ŒéSDå¡ã€‚<br> ä½¿ç”¨<code>ContextCompat.getExternalFilesDirs()</code>ï¼Œæˆ–è€…4.4ç‰ˆæœ¬ä»¥ä¸Šä½¿ç”¨<code>getExternalFilesDirs()</code>ä¼šè¿”å›ä¸€ä¸ªFileæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªæ˜¯é»˜è®¤çš„å¤–éƒ¨å­˜å‚¨ã€‚</p>
<p>åˆ›å»ºåº”ç”¨ç§æœ‰æ–‡ä»¶çš„æ–¹æ³•æ˜¯<code>Context.getExternalFilesDir()</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public File getAlbumStorageDir(Context context, String albumName) &#123;</div><div class="line">// Get the directory for the app&apos;s private pictures directory.</div><div class="line">File file = newFile(context.getExternalFilesDir(</div><div class="line">Environment.DIRECTORY_PICTURES), albumName);</div><div class="line">if(!file.mkdirs()) &#123;</div><div class="line">Log.e(LOG_TAG, &quot;Directory not created&quot;);</div><div class="line">&#125;</div><div class="line">returnfile;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªpictureç›®å½•ï¼Œå¹¶åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªåä¸ºalbumNameçš„æ–‡ä»¶ï¼Œ<code>Environment.DIRECTORY_PICTURES</code>å…¶å®å°±æ˜¯å­—ç¬¦ä¸²pictureã€‚</p>
<p>å¦‚æœä½ çš„api ç‰ˆæœ¬ä½äº8ï¼Œé‚£ä¹ˆä¸èƒ½ä½¿ç”¨<code>getExternalFilesDir()</code>ï¼Œè€Œæ˜¯ä½¿ç”¨<code>Environment.getExternalStorageDirectory()</code>è·å¾—æ ¹è·¯å¾„ä¹‹åï¼Œè‡ªå·±å†æƒ³åŠæ³•æ“ä½œ<code>/Android/data/&lt;package_name&gt;/</code>ä¸‹çš„æ–‡ä»¶ã€‚</p>
<hr>
<p> <strong>æ³¨æ„ï¼Œåª’ä½“æ‰«æå™¨ä¹Ÿä¸èƒ½é€šè¿‡<code>MediaStore</code> content provideræ‰«æå†…éƒ¨å­˜å‚¨ç§æœ‰æ–‡ä»¶ï¼Œæ‰€ä»¥ä½ ä¸åº”åœ¨è¿™é‡Œå­˜å‚¨ç…§ç‰‡ã€éŸ³ä¹ã€‚ä½†æ˜¯åˆ«çš„åº”ç”¨å¯ä»¥è¯»å–åˆ°ä»–ä»¬ã€‚</strong></p>
<h3 id="3-5-å¤–éƒ¨å­˜å‚¨ç¼“å­˜"><a href="#3-5-å¤–éƒ¨å­˜å‚¨ç¼“å­˜" class="headerlink" title="3.5 å¤–éƒ¨å­˜å‚¨ç¼“å­˜"></a>3.5 å¤–éƒ¨å­˜å‚¨ç¼“å­˜</h3><blockquote>
<p>To open a File that represents the external storage directory where you should save cache files, call <code>getExternalCacheDir()</code>. If the user uninstalls your application, these files will be automatically deleted.</p>
</blockquote>
<p>è°ƒç”¨contextçš„<code>getExternalCacheDir()</code>æ–¹æ³•è·å–å¤–éƒ¨å­˜å‚¨çš„ç§æœ‰ç¼“å­˜æ–‡ä»¶å¤¹ã€‚</p>
<h2 id="å››ã€å„ç§ç›®å½•æ‰“å°"><a href="#å››ã€å„ç§ç›®å½•æ‰“å°" class="headerlink" title="å››ã€å„ç§ç›®å½•æ‰“å°"></a>å››ã€å„ç§ç›®å½•æ‰“å°</h2><p>æœ€åä¸ºäº†å¼„æ¸…æ¥š<code>getFilesDir</code>ï¼Œ<code>getExternalFilesDir</code>ï¼Œ<code>getExternalStorageDirectory</code>ï¼Œ<code>getExternalStoragePublicDirectory</code>ç­‰androidæ–‡ä»¶æ“ä½œæ–¹æ³•ï¼Œæˆ‘å°†è¿™äº›æ–¹æ³•çš„æ‰§è¡Œç»“æœæ‰“å°å‡ºæ¥ï¼Œçœ‹çœ‹åˆ°åº•è·¯å¾„æ˜¯å•¥æ ·ï¼Œåœ¨activityä¸­æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Log.i(&quot;codecraeer&quot;, &quot;getFilesDir = &quot; + getFilesDir());</div><div class="line">Log.i(&quot;codecraeer&quot;, &quot;getExternalFilesDir = &quot; + getExternalFilesDir(&quot;exter_test&quot;).getAbsolutePath());</div><div class="line">Log.i(&quot;codecraeer&quot;, &quot;getDownloadCacheDirectory = &quot; + Environment.getDownloadCacheDirectory().getAbsolutePath());</div><div class="line">Log.i(&quot;codecraeer&quot;, &quot;getDataDirectory = &quot; + Environment.getDataDirectory().getAbsolutePath());</div><div class="line">Log.i(&quot;codecraeer&quot;, &quot;getExternalStorageDirectory = &quot; + Environment.getExternalStorageDirectory().getAbsolutePath());</div><div class="line">Log.i(&quot;codecraeer&quot;, &quot;getExternalStoragePublicDirectory = &quot; + Environment.getExternalStoragePublicDirectory(&quot;pub_test&quot;));</div></pre></td></tr></table></figure>
<p>åœ¨logä¸­çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š<br><img src="http://www.jcodecraeer.com/uploads/20130923/13799270389415.jpg" alt="image2.jpg"></p>
<h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>ä¸€å¼ å›¾æ€»ç»“ï¼Œæˆ‘ä¸ªäººçš„ç†è§£æ˜¯å­˜å‚¨æŒ‰ç…§ä¸åŒçš„è§’åº¦åˆ†ä¸ºä¸¤ç§ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/3251332-65d6a32fac167dc9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li>æŒ‰ç…§å†…å¤–éƒ¨ï¼šå†…éƒ¨å­˜å‚¨ï¼Œå¤–éƒ¨å­˜å‚¨<ul>
<li>åŒºåˆ«ï¼šå¸¦Externalå­—çœ¼åˆ™ä¸€å®šæ˜¯å¤–éƒ¨å­˜å‚¨çš„æ–¹æ³•ï¼Œå¦‚<code>getExternalFilesDir()</code>ï¼Œå¤–éƒ¨å­˜å‚¨éœ€è¦è¿è¡Œæ—¶æƒé™</li>
</ul>
</li>
<li>æŒ‰ç…§å…±æœ‰ç§æœ‰æ€§è´¨ï¼šå…¬å…±æ–‡ä»¶ï¼Œç§æœ‰æ–‡ä»¶<ul>
<li>åŒºåˆ«ï¼šå…¬å…±æ–‡ä»¶æ˜¯Environmentè°ƒç”¨å‡½æ•°ï¼Œè€Œç§æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬å†…éƒ¨ç§æœ‰ä¸å¤–éƒ¨ç§æœ‰ï¼‰æ˜¯Contextè°ƒç”¨å‡½æ•°ï¼Œå…¬å…±æ–‡ä»¶ä¸ä¼šéšç€appå¸è½½è€Œåˆ é™¤ï¼Œç§æœ‰åˆ™ä¼šã€‚ç§æœ‰æ–‡ä»¶ä¸ä¼šè¢«Media Scanneræ‰«æåˆ°ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>å¼•ç”¨</p>
<p><a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2013/0923/1557.html" target="_blank" rel="external">androidä¸­çš„æ–‡ä»¶æ“ä½œè¯¦è§£ä»¥åŠå†…éƒ¨å­˜å‚¨å’Œå¤–éƒ¨å­˜å‚¨</a></p>
<p><a href="http://developer.android.com/training/basics/data-storage/files.html#InternalVsExternalStorage" target="_blank" rel="external">http://developer.android.com/training/basics/data-storage/files.html#InternalVsExternalStorage</a></p>
<p><a href="http://developer.android.com/guide/topics/data/data-storage.html" target="_blank" rel="external">http://developer.android.com/guide/topics/data/data-storage.html</a></p>
<p><a href="https://developer.android.com/about/versions/marshmallow/android-6.0.html" target="_blank" rel="external">https://developer.android.com/about/versions/marshmallow/android-6.0.html</a></p>
</blockquote>

  	</div>

	  <div class="article-tags tags">
		  
	  </div>
	</section>
</article>




      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?" />
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/youyuge34" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="http://weibo.com/1806842090/" class="social sina-weibo"
          target="_blank" rel="external">
          <span class="icon icon-sina-weibo"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>.</div>
  <div>&copy; <a href="/">å°¤é±¼å“¥</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  



<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
</body>
</html>
